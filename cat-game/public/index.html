<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>고양이 쓰다듬기: 힐링 클릭커</title>
    <link href="https://fonts.googleapis.com/css2?family=Jua&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css?v=15">
    <!-- PayPal SDK (Testing Client ID) -->
    <script src="https://www.paypal.com/sdk/js?client-id=test&currency=USD"></script>
    <!-- Firebase App (from CDN) for mock setup -->
    <script type="module" src="https://www.gstatic.com/firebasejs/10.4.0/firebase-app.js"></script>
    <script type="module" src="https://www.gstatic.com/firebasejs/10.4.0/firebase-auth.js"></script>
    <script type="module" src="https://www.gstatic.com/firebasejs/10.4.0/firebase-firestore.js"></script>
</head>

<body>
    <div id="app">
        <header>
            <div id="top-bar">
                <div class="stat" title="Score (친밀도)">💖 <span id="score">0</span></div>
                <div class="stat" title="Treats (간식)">🐟 <span id="treats">0</span></div>
                <div class="stat" title="Combo (연속 터치)">🔥 <span id="combo">0</span></div>
                <div class="stat" title="Multiplier (배율)">✖️ <span id="multiplier">1</span></div>
            </div>
            <!-- Top Bar Next Unlock deleted to move into Wardrobe modal -->
            <div id="pet-meter-container">
                <div id="pet-meter-label">Pet Meter ✨ <span id="happy-mode-indicator"
                        style="display:none; color:#ff4d85;">HAPPY MODE!</span></div>
                <div id="pet-meter-bg">
                    <div id="pet-meter-fill"></div>
                </div>
            </div>
            <div id="controls-bar">
                <button id="sound-toggle" title="Sound Toggle">🔊</button>
                <div id="user-info">
                    <span id="saved-indicator" style="opacity: 0;">💾 저장됨</span>
                    <span id="player-name">게스트</span>
                    <button id="login-btn">로그인</button>
                </div>
            </div>
        </header>

        <main>
            <div id="cat-container">
                <div id="cat" class="cat-normal">
                    <img src="assets/cat.jpg" alt="귀여운 고양이"
                        style="width: 100%; height: 100%; object-fit: cover; border-radius: 20px;">
                    <!-- Accessory Overlays -->
                    <div id="acc-glasses" class="accessory-layer"></div>
                    <div id="acc-scarf" class="accessory-layer"></div>
                    <div id="acc-hat" class="accessory-layer"></div>
                    <div id="acc-accessory" class="accessory-layer"></div>
                </div>
                <div id="particles"></div>
            </div>
            <!-- Bottom Action Bar -->
            <div id="bottom-bar">
                <button id="nav-shop" class="nav-btn">🛒 상점</button>
                <button id="nav-missions" class="nav-btn">🎯 미션</button>
                <button id="nav-leaderboard" class="nav-btn">🏆 랭킹</button>
            </div>
        </main>

        <footer style="display:none;">
            <!-- Legacy footer, hidden but kept for reference if needed -->
            <button id="store-btn">✨ 황금 츄르 구매 ($1.99) ✨</button>
            <p class="store-desc">고양이가 황금빛으로 빛나며 쓰다듬기 효과가 10배 증가합니다!</p>
            <div id="paypal-button-container" style="display: none;"></div>
        </footer>

        <!-- Removed standalone Wardrobe Modal -->

        <!-- Unlock Toast -->
        <div id="unlock-toast" class="toast">
            <div class="toast-icon">🎁</div>
            <div class="toast-content">
                <h4 style="margin:0;">새로운 아이템 잠금 해제!</h4>
                <p id="unlock-toast-name" style="margin:5px 0 0 0;">아이템 이름</p>
            </div>
        </div>

        <!-- Shop Modal -->
        <div id="shop-modal" class="modal">
            <div class="modal-content">
                <span class="close-btn" data-target="shop-modal">&times;</span>
                <div class="shop-tabs">
                    <button class="shop-tab active" data-shoptab="upgrades-tab">🛒 업그레이드</button>
                    <button class="shop-tab" data-shoptab="wardrobe-tab">🎩 옷장</button>
                </div>

                <!-- Upgrades View -->
                <div id="upgrades-tab" class="shop-tab-content active">
                    <div id="shop-list" class="list-container">
                        <!-- Loaded via JS -->
                    </div>
                </div>

                <!-- Wardrobe View -->
                <div id="wardrobe-tab" class="shop-tab-content">
                    <div id="wardrobe-progress-container">
                        <div id="wardrobe-progress-label">Next Reward: <span id="wardrobe-next-score">1000</span>💖
                        </div>
                        <div id="wardrobe-progress-bg">
                            <div id="wardrobe-progress-fill"></div>
                        </div>
                    </div>
                    <div class="wardrobe-categories">
                        <button class="cat-tab active" data-cat="glasses">Glasses</button>
                        <button class="cat-tab" data-cat="scarf">Scarf</button>
                        <button class="cat-tab" data-cat="hat">Hat</button>
                        <button class="cat-tab" data-cat="accessory">Accessory</button>
                    </div>
                    <div id="wardrobe-grid" class="wardrobe-grid">
                        <!-- Items rendered via JS -->
                    </div>
                </div>

            </div>
        </div>

        <!-- Missions Modal -->
        <div id="missions-modal" class="modal">
            <div class="modal-content">
                <span class="close-btn" data-target="missions-modal">&times;</span>
                <h2>🎯 일일 미션 (Daily Missions)</h2>
                <div id="missions-list" class="list-container">
                    <!-- Loaded via JS -->
                </div>
            </div>
        </div>

        <!-- Leaderboard Modal -->
        <div id="leaderboard-modal" class="modal">
            <div class="modal-content">
                <span class="close-btn" data-target="leaderboard-modal">&times;</span>
                <h2>🏆 로컬 랭킹 (Top 10)</h2>
                <div id="leaderboard-list" class="list-container">
                    <!-- Loaded via JS -->
                </div>
            </div>
        </div>

        <!-- Daily Login Modal -->
        <div id="daily-login-modal" class="modal">
            <div class="modal-content">
                <h2>📅 출석 체크!</h2>
                <p>오늘도 와주셨군요! 연속 출석 보상을 받으세요.</p>
                <div id="daily-streak-display">
                    <!-- Logs streak -->
                </div>
                <button id="claim-daily-btn" class="action-btn">보상 받기</button>
            </div>
        </div>

    </div>

    <!-- 힐링 사운드(임의의 효과음 파일이 있다고 가정) -->
    <audio id="purr-sound" src="https://actions.google.com/sounds/v1/animals/cat_purring.ogg"></audio>
    <audio id="meow-sound" src="https://actions.google.com/sounds/v1/animals/cat_meow.ogg"></audio>

    <script type="module" src="script.js?v=15"></script>
</body>

</html>